# 1.需求
绑架案,一手交钱,一手交人:
张三团伙,绑架了小红,放言需要100万来赎人,情景就是张三团伙和小红的家属到达约定的地点后,一手交钱,一手交货交易.

---

# 2.拆分过程
有2个线程,两个线程都到达同步点后交换数据:
如果只有1个线程到达安全点,交易不成立.

---

# 3.具体实现见代码
使用Exchanger组件实现,详情见代码实现.

---

# 4.总结
Exchanger (交换器),用于**2个线程**间的同类数据交换.

---

# Exchanger 介绍
Exchanger可以作为两个线程交换对象的同步点，只有当每个线程都在进入 exchange()方法并给出对象时，才能接受其他线程返回时给出的对象。 
每次只能两个线程交换数据，**如果有多个线程，也只有两个能交换数据。**

Exchanger 可能被视为 SynchronousQueue 的双向形式。Exchanger 可能在应用程序（比如遗传算法和管道设计）中很有用。

内存一致性效果：对于通过 Exchanger 成功交换对象的每对线程，每个线程中在 exchange() 之前的操作 happen-before 从另一线程中相应的 exchange() 返回的后续操作。 

---

# 主要方法
## 构造方法
- Exchanger() <br>
          创建一个新的 Exchanger。

## 常用方法
-  V exchange(V x) <br>
          等待另一个线程到达此交换点（除非当前线程被中断），然后将给定的对象传送给该线程，并接收该线程的对象。 
-  V exchange(V x, long timeout, TimeUnit unit) <br>
          等待另一个线程到达此交换点（除非当前线程被中断，或者超出了指定的等待时间），然后将给定的对象传送给该线程，同时接收该线程的对象。 


